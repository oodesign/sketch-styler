'use strict';

exports.__esModule = true;

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const fileRegex = /^(?!.*\.(jsx?|tsx?|json|nib|xib)$).*/; // match everything except .jsx? and .tsx? and json

const WEBPACK_DIRECTORY = '_webpack_resources';

const commandResourceLoader = {
  test: fileRegex,
  use: {
    loader: '@skpm/file-loader',
    query: {
      raw: true,
      outputPath(url) {
        return _path2.default.posix.join('..', 'Resources', WEBPACK_DIRECTORY, url);
      },
      publicPath(url) {
        return `"file://" + context.plugin.urlForResourceNamed("${WEBPACK_DIRECTORY}/${url}").path()`;
      }
    }
  }
};

exports.default = commandResourceLoader;